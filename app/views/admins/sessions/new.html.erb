<div class="admin-login-container">
  <div class="card auth-card">
    <div class="card-header text-center">
      <h2 class="mb-2">
        <i class="fas fa-shield-alt mr-2"></i>
        Admin Access
      </h2>
      <p class="auth-subtext mb-0">Sign in to admin panel</p>
    </div>

    <div class="card-body">
      <%= form_for(resource, as: resource_name, url: session_path(resource_name), html: { class: 'auth-form admin-login-form' }) do |f| %>
        <% if alert %>
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="fas fa-exclamation-triangle mr-2"></i><%= alert %>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        <% end %>

        <div class="mb-3">
          <%= f.label :email, class: 'form-label' %>
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-envelope"></i></span>
            <%= f.email_field :email, autofocus: true, autocomplete: 'email', class: 'form-control form-control-lg', placeholder: 'Enter admin email address', required: true %>
          </div>
        </div>

        <div class="mb-3">
          <%= f.label :password, class: 'form-label' %>
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-lock"></i></span>
            <%= f.password_field :password, autocomplete: 'current-password', class: 'form-control form-control-lg', placeholder: 'Enter your password', required: true, id: 'admin_password_field' %>
            <button class="btn btn-outline-secondary" type="button" id="admin_toggle_password" title="Show/Hide Password">
              <i class="fas fa-eye" id="admin_eye_icon"></i>
            </button>
          </div>
        </div>

        <% if devise_mapping.rememberable? %>
          <div class="form-check mb-4 d-flex align-items-center">
            <%= f.check_box :remember_me, class: 'form-check-input me-2' %>
            <%= f.label :remember_me, class: 'form-check-label mb-0 auth-subtext' %>
          </div>
        <% end %>

        <%= f.submit 'Sign In to Admin', class: 'btn btn-auth-primary w-100', id: 'admin_login_button' %>
      <% end %>

      <!-- Security Notice -->
      <div class="security-notice mt-3">
        <div class="alert alert-info mb-0">
          <i class="fas fa-info-circle mr-2"></i>
          <strong>Security:</strong> Your session will be monitored for security purposes.
        </div>
      </div>
    </div>

    <div class="card-footer">
      <div class="auth-links">
        <%= link_to "Forgot your password?", new_password_path(resource_name), class: 'auth-subtext' %>
        <span class="auth-divider"></span>
        <%= link_to "Back to Site", root_path, class: 'auth-subtext' %>
      </div>
    </div>
  </div>

  <!-- Admin Access Info -->
  <div class="admin-access-info mt-3">
    <div class="row">
      <div class="col-12">
        <div class="alert alert-warning mb-0 text-center">
          <i class="fas fa-exclamation-triangle mr-2"></i>
          <strong>Admin Area:</strong> Unauthorized access is prohibited
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.admin-login-container {
  max-width: 500px;
  margin: 0 auto;
}

.security-notice .alert-info {
  background-color: #d1ecf1;
  border-color: #bee5eb;
  color: #0c5460;
  font-size: 0.9rem;
}

.admin-access-info .alert-warning {
  background-color: #fff3cd;
  border-color: #ffeaa7;
  color: #856404;
  font-size: 0.9rem;
}

.admin-login-form .input-group-text {
  background: #f8f9fa;
  border-right: none;
  color: #dc3545;
}

.admin-login-form .form-control {
  border-left: none;
}

.admin-login-form .form-control:focus {
  border-left: 1px solid #dc3545;
  box-shadow: none;
}

.admin-login-form .input-group .form-control:focus ~ .input-group-text {
  border-color: #dc3545;
}

#admin_toggle_password {
  border-left: none;
  cursor: pointer;
}

#admin_login_button.loading {
  pointer-events: none;
  opacity: 0.7;
  position: relative;
}

#admin_login_button.loading::after {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  top: 50%;
  left: 50%;
  margin: -10px 0 0 -10px;
  border: 2px solid #ffffff;
  border-radius: 50%;
  border-top-color: transparent;
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Toggle password visibility for admin
  const togglePassword = document.getElementById('admin_toggle_password');
  const passwordField = document.getElementById('admin_password_field');
  const eyeIcon = document.getElementById('admin_eye_icon');
  
  if (togglePassword && passwordField && eyeIcon) {
    togglePassword.addEventListener('click', function() {
      const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordField.setAttribute('type', type);
      
      if (type === 'password') {
        eyeIcon.classList.remove('fa-eye-slash');
        eyeIcon.classList.add('fa-eye');
      } else {
        eyeIcon.classList.remove('fa-eye');
        eyeIcon.classList.add('fa-eye-slash');
      }
    });
  }
  
  // Add loading state on form submit
  const loginForm = document.querySelector('.admin-login-form');
  const loginButton = document.getElementById('admin_login_button');
  
  if (loginForm && loginButton) {
    loginForm.addEventListener('submit', function() {
      loginButton.classList.add('loading');
      loginButton.disabled = true;
    });
  }
});
</script>
