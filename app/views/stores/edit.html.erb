<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card">
        <div class="card-header">
          <h2 class="mb-0">
            <i class="fas fa-edit me-2"></i>
            Edit Store
          </h2>
        </div>
        <div class="card-body">
          <%= form_for @store, html: { multipart: true } do |f| %>
            <%= render 'shared/errors', object: @store %>
            <div class="mb-3">
              <%= f.label :name, class: "form-label" %>
              <%= f.text_field :name, class: 'form-control', required: true, placeholder: 'Store name' %>
              <small class="form-text text-muted">Store name</small>
            </div>
            <div class="mb-3">
              <%= f.label :cover, class: "form-label" %>
              <%= f.file_field :cover, class: 'form-control', accept: 'image/*' %>
              <small class="form-text text-muted">Store cover image</small>
              <% if @store.cover.present? %>
                <div class="mt-2">
                  <small class="text-muted">Current image:</small><br>
                  <%= image_tag @store.cover, style: "max-width: 200px; height: auto;", class: "mt-1" %>
                </div>
              <% end %>
            </div>
            <div class="mb-3">
              <%= f.label :email, class: "form-label" %>
              <%= f.email_field :email, class: 'form-control', required: true, placeholder: 'store@example.com' %>
              <small class="form-text text-muted">Store email</small>
            </div>
            <div class="mb-3">
              <%= f.label :contact_number, class: "form-label" %>
              <%= f.text_field :contact_number, class: 'form-control', placeholder: 'Contact number' %>
              <small class="form-text text-muted">Contact number</small>
            </div>
            <div class="mb-3">
              <%= f.label :description, class: "form-label" %>
              <%= f.text_area :description, class: 'form-control', required: true, rows: 4, placeholder: 'Store description' %>
              <small class="form-text text-muted">Store description</small>
            </div>
            <div class="mb-3">
              <%= f.label :mall_id, "Mall (Optional)", class: "form-label" %>
              <%= f.select :mall_id, options_from_collection_for_select(@malls, :id, :name, @store.mall_id), { prompt: 'Select a mall (optional)' }, { class: 'form-select' } %>
              <small class="form-text text-muted">Optionally assign your store to a mall</small>
            </div>
            <% if current_user&.admin? %>
              <div class="mb-3">
                <div class="form-check">
                  <%= f.check_box :active, class: 'form-check-input' %>
                  <%= f.label :active, "Active", class: 'form-check-label' %>
                  <small class="form-text text-muted d-block">Active stores are visible to the public</small>
                </div>
              </div>
            <% end %>
            <div class="d-flex justify-content-between mt-4">
              <%= link_to 'Cancel', @store, class: 'btn btn-secondary' %>
              <%= f.submit 'Update Store', class: 'btn btn-primary' %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

